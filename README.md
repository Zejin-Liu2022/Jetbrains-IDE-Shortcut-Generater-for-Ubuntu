# Ubuntu JetBrains 桌面快捷方式生成器

这是一个适用于 Ubuntu (及其他 GNOME 桌面环境 Linux 发行版) 的 Bash 脚本。它主要用于为手动下载解压的 JetBrains 系列 IDE（如 IntelliJ IDEA, PyCharm, WebStorm, CLion 等）自动创建桌面快捷方式。

**核心特性：智能识别“原生二进制”启动文件，而非仅仅使用 .sh 脚本。**

## ✨ 功能特点

*   **🚀 智能启动项检测**：
    *   虽然你需要输入 `bin` 目录路径或 `.sh` 脚本路径（作为定位锚点），但脚本会自动寻找同名的**二进制可执行文件**（例如 `idea` 或 `pycharm`）。
    *   **优势**：相比运行 `.sh` 脚本，直接运行二进制文件启动速度更快，且符合官方推荐的启动方式。
    *   **回退机制**：如果找不到二进制文件，脚本会自动降级使用 `.sh` 脚本，保证快捷方式可用。
*   **🔍 自动图标搜寻**：自动在 `bin` 目录或其上级目录查找 `.svg` 或 `.png` 图标，无需手动指定。
*   **🔧 权限自动修复**：
    *   自动赋予生成的 `.desktop` 文件执行权限。
    *   检测到 IDE 核心文件无执行权限时，会提示使用 `sudo` 进行修复（适用于安装在 `/opt` 等目录的情况）。
*   **🌍 路径自适应**：自动识别中文系统（`桌面`）或英文系统（`Desktop`）路径。

## 🛠 使用方法

### 1. 保存脚本
将脚本代码保存为文件，例如 `create_shortcut.sh`。

### 2. 赋予执行权限
在终端中运行以下命令：
```bash
chmod +x create_shortcut.sh
```

### 3. 运行脚本
```bash
./create_shortcut.sh
```

### 4. 按照提示操作
脚本会交互式地询问以下信息：
1.  **输入路径**：直接把 IDE 解压后的 `bin` 文件夹拖入终端即可（脚本会自动处理引号）。
2.  **输入名称**：给快捷方式起个名字（如 `IDEA 2024`）。
3.  **确认图标**：脚本通常会自动找到，直接回车即可。

---

## ⚠️ 注意事项 (Ubuntu / GNOME 用户必读)

在较新的 Ubuntu 版本中，出于安全策略，脚本生成的桌面图标初次显示时可能是一个**灰色齿轮**或**禁止符号**，且双击无效。

**解决方法：**
1.  在桌面上找到刚刚生成的图标文件。
2.  **右键点击** 该图标。
3.  在菜单中选择 **“允许运行” (Allow Launching)**。
4.  图标即可恢复正常 Logo 并可双击启动。

---

## ❓ 常见问题

**Q: 为什么脚本要优先找二进制文件而不是 .sh？**
A: 虽然 `.sh` 也能启动，但在某些桌面环境下，直接运行二进制 ELF 文件（如 `idea`, `pycharm`）响应更快，且进程树更干净。脚本会自动判断：如果找到了 `idea`（二进制），就用它；如果只找到了 `idea.sh`，就用脚本。

**Q: 我想把快捷方式放到应用菜单里（按 Super 键能搜到），而不是桌面上。**
A: 脚本默认生成在桌面。生成后，你可以运行以下命令将其移动到系统应用目录：
```bash
mv ~/Desktop/你的快捷方式名.desktop ~/.local/share/applications/
```

**Q: 支持非 JetBrains 软件吗？**
A: 支持。只要该软件的结构类似（bin 目录下有启动文件），此脚本通常都能正常工作。

---

## 📝 示例

假设你下载了 PyCharm 并解压到了 Downloads 目录：

1.  运行脚本。
2.  提示输入路径时，输入：`/home/user/Downloads/pycharm-2024.1/bin`
3.  脚本会自动检测到 `/bin/pycharm.sh`，然后自动定位到更优的启动文件 `/bin/pycharm` (二进制)。
4.  桌面生成快捷方式 `PyCharm Professional.desktop`。